# Система автоматического обновления памяти проектов

## Обзор
Данная система позволяет автоматически сканировать все проекты в workspace и обновлять их документацию в supermemory при изменениях.

## Файлы системы

### `update_memory.py`
Основной сканер проектов, который:
- Сканирует структуру проектов (analyzer, collections, trader)
- Извлекает информацию о документации, коде и конфигурации
- Генерирует сводки проектов

### `update_memory_mcp.py`
Интегратор с MCP supermemory, который:
- Использует данные от сканера
- Отправляет информацию в supermemory через MCP инструменты

## Как использовать

### Ручной запуск
```bash
# Сканирование проектов
python update_memory.py

# Обновление в supermemory
python update_memory_mcp.py
```

### Интеграция с VS Code
Для автоматического обновления при изменениях файлов:

1. **Настроить File Watcher в VS Code:**
   - Установить расширение "File Watcher"
   - Создать правило для папок `analyzer/`, `collections/`, `trader/`
   - При изменении файлов `*.md`, `*.py`, `*.cs`, `*.sln` запускать скрипт

2. **Использовать VS Code Tasks:**
   ```json
   {
     "version": "2.0.0",
     "tasks": [
       {
         "label": "Update Project Memory",
         "type": "shell",
         "command": "python",
         "args": ["update_memory_mcp.py"],
         "group": "build",
         "presentation": {
           "echo": true,
           "reveal": "silent",
           "focus": false,
           "panel": "shared"
         },
         "runOptions": {
           "runOn": "folderOpen"
         }
       }
     ]
   }
   ```

## Что сканируется

### Для каждого проекта:
- **Тип проекта** (Python Analyzer, C# .NET Solution, etc.)
- **Структура файлов** и языки программирования
- **Документация** из папки `docs/`
- **Конфигурационные файлы** (requirements.txt, *.csproj, etc.)
- **Основные файлы** проекта

### Формат сохранения в supermemory:
```
# Проект [название]

## Обзор
- Тип проекта: [тип]
- Расположение: [путь]
- Языки программирования: [список]
- Основные файлы: [список]

## Структура проекта
- Документация: [количество] файлов
- Исходный код: [количество] файлов
- Конфигурационные файлы: [количество] файлов
```

## Интеграция с supermemory

Система использует MCP инструменты:
- `addMemory` - для сохранения информации о проектах
- `search` - для проверки существующих данных

## Автоматическое обновление

### Вариант 1: Git hooks
```bash
# .git/hooks/post-commit
#!/bin/bash
python update_memory_mcp.py
```

### Вариант 2: CI/CD pipeline
Добавить в GitHub Actions или другой CI:
```yaml
- name: Update Project Memory
  run: python update_memory_mcp.py
```

### Вариант 3: Планировщик задач
```bash
# Cron job для ежедневного обновления
0 2 * * * cd /path/to/project && python update_memory_mcp.py
```

## Преимущества системы

1. **Автоматизация** - память обновляется без ручного вмешательства
2. **Актуальность** - всегда свежая информация о проектах
3. **Структурированность** - стандартизированный формат хранения
4. **Масштабируемость** - легко добавить новые проекты

## Расширение системы

Для добавления новых проектов:
1. Добавить путь в словарь `self.projects` в `ProjectScanner.__init__()`
2. Обновить логику определения типа проекта в `_detect_project_type()`
3. При необходимости добавить новые типы сканирования

## Устранение неполадок

### Проблема: Кодировка файлов
**Решение:** Все файлы читаются в UTF-8 с fallback на системную кодировку

### Проблема: Большие файлы
**Решение:** Ограничение размера контента (2000 символов для docs, 1000 для config)

### Проблема: MCP соединение
**Решение:** Проверить настройки MCP сервера в VS Code
