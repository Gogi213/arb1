# ISSUE-001: Неожиданный обрыв JSON при большом количестве пар

## Проблема
Клиент получает ошибку `Error: Unexpected end of JSON input` при запросе большого количества графиков. Серверные логи показывают, что код приложения успешно завершает свою работу и отдает ответ `200 OK`, однако ответ до клиента доходит в усеченном виде.

## Перебор гипотез

### Гипотеза 1: Исчерпание оперативной памяти (OOM Kill) - **ПОДТВЕРЖДЕНА**
-   **Суть:** Процесс `uvicorn` потребляет слишком много памяти на этапе сериализации финального, очень большого объекта с данными в JSON. Операционная система принудительно завершает процесс, что приводит к обрыву HTTP-ответа.
-   **План проверки:** Внедрить логирование потребления памяти.
-   **Статус:** **Проверено и подтверждено.**
-   **История:**
    -   **2025-11-06 (1):** Попытка внедрить логирование памяти (`PROPOSAL-2025-0080`). Код был ошибочно размещен в блоке `except`.
    -   **2025-11-06 (2):** Расположение кода исправлено (`PROPOSAL-2025-0081`).
    -   **Результат эксперимента:** Логи показали потребление памяти **~2.2 ГБ** непосредственно перед отправкой ответа. Это доказывает, что проблема именно в критически высоком потреблении памяти. Диагностика размера объекта через `sys.getsizeof` оказалась неверной и неинформативной.

### Гипотеза 2: Баг в веб-сервере (uvicorn) - **ОТКЛОНЕНА**
-   **Суть:** Баг в `uvicorn`.
-   **Статус:** Отклонена, так как доказана Гипотеза 1.

### Гипотеза 3: Проблема на уровне сети или клиента - **ОТКЛОНЕНА**
-   **Суть:** Проблема в сети или браузере.
-   **Статус:** Отклонена, так как доказана Гипотеза 1.

## Решение
Поскольку причина проблемы — накопление всех данных в памяти — однозначно установлена, единственным надежным архитектурным решением является переход на потоковую передачу данных (streaming), как описано в `PROPOSAL-2025-0079`.