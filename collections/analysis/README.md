# –ê–Ω–∞–ª–∏–∑ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ (–û–°–ù–û–í–ù–û–ô –°–ö–†–ò–ü–¢)

```bash
python latency_analysis_fast.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∞—è –±–∏—Ä–∂–∞ –±—ã—Å—Ç—Ä–µ–µ (–ª–∏–¥–µ—Ä), –∫–∞–∫–∞—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ (—Ñ–æ–ª–ª–æ–≤–µ—Ä)
- –ù–∞—Ö–æ–¥–∏—Ç –∏–º–ø—É–ª—å—Å—ã (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏) –Ω–∞ –±—ã—Å—Ç—Ä–æ–π –±–∏—Ä–∂–µ
- –ò—â–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∏—Ä–∂–µ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Ü–µ–Ω–∞ —Ç–∞–º –∏–∑–º–µ–Ω–∏—Ç—Å—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `latency_opportunities.parquet`

---

## üìÅ –§–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ

- **`latency_analysis_fast.py`** ‚≠ê - **–ó–ê–ü–£–°–ö–ê–ô –≠–¢–û–¢!** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å Numba JIT
- **`requirements.txt`** - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (polars, numpy, numba)

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ

- **`benchmark.py`** - –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ NumPy vs Numba)
- **`find_opportunities.py`** - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–û—Ç–∫—Ä–æ–π `latency_analysis_fast.py` –∏ –∏–∑–º–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:

```python
# –ö–∞–∫–∏–µ –±–∏—Ä–∂–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å
EXCHANGES = ["Binance", "GateIo"]

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
TIME_BUCKET_MS = 100       # –†–∞–∑–º–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –±–∞–∫–µ—Ç–∞
MIN_LAG_MS = 50            # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
MAX_LAG_MS = 2000          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–ø—É–ª—å—Å–æ–≤
MIN_IMPULSE_USD = 10000    # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –∏–º–ø—É–ª—å—Å–∞
IMPULSE_PRICE_MOVE = 0.001 # 0.1% –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã

# –¶–µ–ª–µ–≤–∞—è –ø—Ä–∏–±—ã–ª—å
TARGET_PROFIT = 0.0015     # 0.15%
```

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üìà BTCUSDT
================================================================
   –ó–∞–≥—Ä—É–∂–µ–Ω–æ: 45,234 + 38,912 —Å–¥–µ–ª–æ–∫

1Ô∏è‚É£  –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏...
   üéØ –õ–∏–¥–µ—Ä: Binance
   üêå –§–æ–ª–ª–æ–≤–µ—Ä: GateIo
   ‚è±Ô∏è  –õ–∞–≥: 250 ¬± 45 –º—Å
   üìä –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è: 0.842
   ‚úÖ Confidence: 0.735

2Ô∏è‚É£  –ü–æ–∏—Å–∫ –∏–º–ø—É–ª—å—Å–æ–≤...
   ‚úÖ –ù–∞–π–¥–µ–Ω–æ: 127
   ‚Ä¢ BUY | $15,234 | Œî0.12%
   ‚Ä¢ SELL | $22,451 | Œî0.18%

3Ô∏è‚É£  –ü–æ–∏—Å–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π...
   ‚úÖ –ù–∞–π–¥–µ–Ω–æ: 34

   –¢–æ–ø-5:
   impulse_timestamp    | direction | volume_usd | profit_pct
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   2025-10-31 10:23:15 | BUY       | 18,500     | 0.28%
   2025-10-31 11:45:22 | SELL      | 21,200     | 0.24%
   ...
```

---

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç?

### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–¥–µ—Ä–∞/—Ñ–æ–ª–ª–æ–≤–µ—Ä–∞

- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–¥–µ–ª–∫–∏ –≤ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±–∞–∫–µ—Ç—ã (VWAP —Ü–µ–Ω—ã)
- –í—ã—á–∏—Å–ª—è–µ—Ç **–∫—Ä–æ—Å—Å-–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é** –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏
- –ù–∞—Ö–æ–¥–∏—Ç –∑–∞–¥–µ—Ä–∂–∫—É (lag) –º–µ–∂–¥—É –¥–≤–∏–∂–µ–Ω–∏–µ–º —Ü–µ–Ω
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∞—è –±–∏—Ä–∂–∞ –≤–µ–¥–µ—Ç (leader), –∫–∞–∫–∞—è —Å–ª–µ–¥—É–µ—Ç (follower)

### 2. –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø—É–ª—å—Å–æ–≤

–ò–º–ø—É–ª—å—Å = —Å–µ—Ä–∏—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –Ω–∞ –ª–∏–¥–µ—Ä–µ:
- –ë–æ–ª—å—à–æ–π –æ–±—ä–µ–º (>$10k)
- –ó–∞–º–µ—Ç–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã (>0.1%)
- –í –∫–æ—Ä–æ—Ç–∫–æ–º –æ–∫–Ω–µ –≤—Ä–µ–º–µ–Ω–∏ (500–º—Å)

### 3. –ü–æ–∏—Å–∫ —Ç–æ—Ä–≥–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ –ª–∏–¥–µ—Ä–µ:
1. –°–º–æ—Ç—Ä–∏—Ç —Ü–µ–Ω—É –Ω–∞ —Ñ–æ–ª–ª–æ–≤–µ—Ä–µ **–≤ –º–æ–º–µ–Ω—Ç –∏–º–ø—É–ª—å—Å–∞**
2. –°–º–æ—Ç—Ä–∏—Ç —Ü–µ–Ω—É –Ω–∞ —Ñ–æ–ª–ª–æ–≤–µ—Ä–µ **—á–µ—Ä–µ–∑ –æ–∂–∏–¥–∞–µ–º—É—é –∑–∞–¥–µ—Ä–∂–∫—É**
3. –ï—Å–ª–∏ —Ü–µ–Ω–∞ —É—Å–ø–µ–ª–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ >0.15% ‚Üí —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å!

---

## üèéÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ:

```bash
python benchmark.py
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- **~50-100x** –±—ã—Å—Ç—Ä–µ–µ —á–µ–º –æ–±—ã—á–Ω—ã–π NumPy
- –û–±—Ä–∞–±–æ—Ç–∫–∞ 10,000 —Ç–æ—á–µ–∫ –∑–∞ ~4-5 –º—Å –≤–º–µ—Å—Ç–æ 400+ –º—Å

---

## üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `latency_opportunities.parquet`:

```python
import polars as pl

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
df = pl.read_parquet("analysis/latency_opportunities.parquet")

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ø –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
print(df.sort("potential_profit_pct", descending=True).head(20))

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Å–∏–º–≤–æ–ª—É
btc_opps = df.filter(pl.col("symbol") == "BTCUSDT")

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
print(df.group_by("symbol").agg([
    pl.count().alias("count"),
    pl.col("potential_profit_pct").mean().alias("avg_profit"),
    pl.col("expected_lag_ms").mean().alias("avg_lag_ms")
]))
```

---

## üö® –í–∞–∂–Ω–æ

–≠—Ç–æ **–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ parquet —Ñ–∞–π–ª–æ–≤.

–î–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω—É–∂–Ω–æ:
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WebSocket –±—ã—Å—Ç—Ä–æ–π –±–∏—Ä–∂–∏ (–ª–∏–¥–µ—Ä–∞)
2. –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø—É–ª—å—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. –ë—ã—Å—Ç—Ä–æ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∏—Ä–∂–µ (—Ñ–æ–ª–ª–æ–≤–µ—Ä–µ)
4. –£—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏, slippage, execution —Ä–∏—Å–∫–∏
