# Sprint Plan: Critical Bugs Fix

**–î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç–∞:** 2025-11-20  
**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏ #10, #11, #12 —Å —Ç–µ—Å—Ç–æ–≤—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º

---

## Sprint 1: Fix LruCache Data Race (#10)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL  
**–í—Ä–µ–º—è:** ~2 —á–∞—Å–∞

### –ó–∞–¥–∞—á–∏:
- [x] –°–æ–∑–¥–∞—Ç—å unit test, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–π race condition
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å LruCache.AddOrUpdate (immutable CacheEntry)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å eviction check (—É–±—Ä–∞—Ç—å TOCTOU)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã

### Deliverables:
- `LruCacheTests.cs` —Å —Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ concurrency
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `LruCache.cs`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## Sprint 2: Fix ParquetWriter Buffer Race (#11)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–í—Ä–µ–º—è:** ~1.5 —á–∞—Å–∞

### –ó–∞–¥–∞—á–∏:
- [ ] –°–æ–∑–¥–∞—Ç—å integration test —Å concurrent writes
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ buffer –ø–µ—Ä–µ–¥ async flush
- [ ] –û–±–µ—Ä–Ω—É—Ç—å fire-and-forget –≤ try-catch
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å flush –Ω–∞ shutdown

### Deliverables:
- `ParquetDataWriterTests.cs`
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `ParquetDataWriter.cs`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤/–ø–æ—Ç–µ—Ä—å)

---

## Sprint 3: Exchange Health Monitor (#12)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** ‚ö†Ô∏è MEDIUM  
**–í—Ä–µ–º—è:** ~2 —á–∞—Å–∞

### –ó–∞–¥–∞—á–∏:
- [ ] –°–æ–∑–¥–∞—Ç—å `ExchangeHealthMonitor` —Å–µ—Ä–≤–∏—Å
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `Program.cs`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (—É–ø–∞–≤—à–∏–µ exchanges)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit tests

### Deliverables:
- `ExchangeHealthMonitor.cs`
- `ExchangeHealthMonitorTests.cs`
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `Program.cs`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## Acceptance Criteria (–¥–ª—è –≤—Å–µ—Ö —Å–ø—Ä–∏–Ω—Ç–æ–≤):
‚úÖ –í—Å–µ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç  
‚úÖ –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç  
‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ warnings  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞  
‚úÖ Code review –ø—Ä–æ–π–¥–µ–Ω

---

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
**Sprint 1:** –í —Ä–∞–±–æ—Ç–µ  
**Sprint 2:** –û–∂–∏–¥–∞–µ—Ç  
**Sprint 3:** –û–∂–∏–¥–∞–µ—Ç
