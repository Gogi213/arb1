# ISSUE-003: Систематическая отладка сбоя рыночной продажи на Gate.io

**Дата:** 2025-10-28

## 1. Описание проблемы

После успешной покупки на Bybit, попытка рыночной продажи на Gate.io завершается ошибкой `Your order size 0 H is too small`. Это происходит несмотря на то, что в `ReverseArbitrageTrader` передается ненулевое количество. Необходимо систематически проверить все гипотезы.

## 2. Гипотезы

| ID | Гипотеза | Статус | Результат |
|----|----------|--------|-----------|
| H-01 | **Неправильное поле:** `BybitOrderAdapter` использует `Quantity` вместо `cumExecQty`. | `Confirmed` | Логи с `PROPOSAL-2025-0014` показали, что передается `0`. |
| H-02 | **Неправильный параметр:** Gate.io ожидает `quoteQuantity` (в USDT) вместо `quantity` (в H). | `To Do` | |
| H-03 | **Ошибка округления/типа:** Передаваемое значение `decimal` некорректно сериализуется в строку. | `To Do` | |
| H-04 | **Проблема в библиотеке:** Внутренняя логика `jkorf/GateIo.Net` для рыночных продаж через WS имеет ошибку. | `To Do` | |

## 3. План отладки

1.  **Добавить логирование:** Вывести в лог точное значение `sellQuantity` прямо перед вызовом `_gateIoExchange.PlaceOrderAsync`. **(PROPOSAL-2025-0014)**
2.  **Проверить гипотезу H-02:** Попробовать передать `quoteQuantity`. **(PROPOSAL-2025-0013)**
3.  **Проверить гипотезу H-01:** Исправить `BybitOrderAdapter` для использования `cumExecQty`. **(PROPOSAL-2025-0012)**
4.  Если ничего не помогает, изучить исходный код `jkorf/GateIo.Net` на предмет сериализации рыночных ордеров.

## 4. Статус

- **Статус:** `Closed`
- **Приоритет:** `Blocker`