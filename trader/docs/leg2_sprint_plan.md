# План спринтов для реализации "Leg 2" (Bybit -> Gate.io)

## Общий статус: В РАБОТЕ

---

### Спринт 1: Инфраструктура и отладка подписки

*   `[x]` **ReverseArbitrageTrader**: Реализован базовый класс, конструктор и логика подписок.
*   `[x]` **BybitTrailingTrader**: Реализована логика трейлинг-покупки на Bybit.
*   `[x]` **BybitLowLatencyWs**: Реализована и отлажена подписка на стакан (`orderbook`). Данные успешно поступают.
*   `[x]` **Host (`Program.cs`)**: Исправлена критическая ошибка с жизненным циклом. Приложение корректно ожидает завершения `Leg 2`.

**Итог спринта:** Вся базовая инфраструктура для `Leg 2` готова. Критические блокировщики устранены.

---

### Спринт 2: Тестирование полного цикла и исправления

*   `[-]` **Текущая задача:** Провести успешное размещение лимитного ордера на Bybit.
    *   **Статус:** **Готово к тестированию**. Проблема с минимальным размером ордера решена увеличением суммы в `appsettings.json`.
*   `[ ]` **HandleBuyOrderFilled**: Реализовать полную обработку исполненного ордера на покупку.
*   `[ ]` **GateIoExchange**: Убедиться, что `PlaceOrderAsync` (Market Sell) вызывается корректно.
*   `[ ]` **HandleSellOrderUpdate**: Реализовать обработку подтверждения о продаже с Gate.io.

**Цель спринта:** Добиться выполнения одного полного арбитражного цикла "покупка на Bybit -> продажа на Gate.io".

---

### Спринт 3: Завершение и рефакторинг

*   `[ ]` **Latency**: Реализовать расчет End-to-End Latency для `Leg 2`.
*   `[ ]` **Cleanup**: Реализовать и протестировать логику `CleanupAndSignalCompletionAsync`.
*   `[ ]` **Рефакторинг**: Вынести "магические числа" и хардкод (размер ордера, тикеры, фильтры) в конфигурацию (задачи `TD-002`, `TD-005` из бэклога).