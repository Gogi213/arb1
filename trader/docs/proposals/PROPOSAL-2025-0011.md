# PROPOSAL-2025-0011: Улучшение логирования ошибок в GateIoExchange

## 1. Диагностика

- **Файлы:** `trader/src/Exchanges/GateIo/GateIoExchange.cs`
- **Проблема:** Метод `PlaceOrderAsync` в `GateIoExchange` при неудачном размещении ордера возвращает `null`, но не логирует причину сбоя, полученную от API. Это затрудняет диагностику ошибок, как в случае с `ISSUE-002`.
- **Серьезность:** `medium`

## 2. Предлагаемые изменения

Предлагается добавить блок `else` после проверки `result.Success`, который будет выводить в консоль детальную информацию об ошибке.

```diff
--- a/trader/src/Exchanges/GateIo/GateIoExchange.cs
+++ b/trader/src/Exchanges/GateIo/GateIoExchange.cs
@@ -89,7 +89,15 @@
  var latency = (t1 - t0).TotalMilliseconds;
  Console.WriteLine($"[Gate API] PlaceOrderAsync WS execution time: {latency:F0}ms");
  
- return result.Success ? result.Data.Id : null;
+ if (result.Success)
+ {
+     return result.Data.Id;
+ }
+ else
+ {
+     Console.WriteLine($"[Gate API ERROR] Failed to place order. Error: {result.Error}");
+     return null;
+ }
  }
  
  public async Task<bool> ModifyOrderAsync(string symbol, long orderId, decimal newPrice, decimal quantity)

```

### Обоснование

Это изменение позволит немедленно видеть в логах точную причину, по которой API Gate.io отклоняет ордер. Это критически важно для быстрой отладки и устранения проблем, связанных с правилами биржи (минимальный размер, точность цены/количества и т.д.).

## 3. Шаги для отката

Выполнить команду в корне проекта:
`git checkout -- trader/src/Exchanges/GateIo/GateIoExchange.cs`

## 4. Оценка рисков

- **Риск:** Низкий.
- **Обоснование:** Изменение добавляет только логирование и не меняет основную логику работы.

## 5. План тестирования

1.  Применить изменение.
2.  Запустить приложение с активным `Leg 2`.
3.  Спровоцировать исполнение ордера на покупку на Bybit.
4.  Проанализировать логи и найти новое сообщение `[Gate API ERROR]`, содержащее детальное описание ошибки от Gate.io.